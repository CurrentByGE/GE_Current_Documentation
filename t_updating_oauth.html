
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Before you begin You must bind your application to the IE service instance before you perform this task. See Binding Your Application to the Intelligent Environment Service Instance for more ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Updating the OAuth2 Client to Use Your Service Instance"></meta><meta name="DC.Creator" content="Linda Jones"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_586a826b-f92f-44c6-9bc7-fdc6bb595fa0"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Updating the OAuth2 Client to Use Your Service Instance</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_586a826b-f92f-44c6-9bc7-fdc6bb595fa0">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Updating the OAuth2 Client to Use Your Service Instance</h1>
<div class="body taskbody"><div class="section prereq p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Before you begin</h2></div>You must bind your application to the IE service instance before you perform this task. See  <a class="xref" href="t_binding_app.html#task_2d375224-43fb-4d20-a177-f80b381c4c9b">Binding Your Application to the Intelligent Environment Service Instance</a> for more information, as it tells you how to verify the binding and view the VCAP_SERVICES environmental variable, which includes the OAuth2 scope, which you will use in the following procedure. <p class="p">The OAuth2 client uses an authorization grant (one of four defined grant types) to request an access token. Based on the type of authorization grant used, you must update your OAuth2 client to generate the required JWT.</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps" id="task_586a826b-f92f-44c6-9bc7-fdc6bb595fa0__steps_9b965e34-5662-4b79-9327-8fc870b74fc6"><li class="li step stepexpand"><span class="ph cmd">To enable applications to access the Intelligent Environment service, make sure your JSON Web Token (JWT) contains the following oauth-scope:</span><div class="itemgroup info">
     <pre class="pre codeblock">ie-&lt;service instance name&gt;.zones.&lt;service_instance_guid&gt;.user</pre>

    </div><div class="itemgroup info">
     <div class="note note"><span class="notetitle">Note:</span>  The OAuth2 scope is created when you set up the service in Predix.</div>

    </div></li>
<li class="li step stepexpand"><span class="ph cmd"> To configure your instance of Predix UAA without using extra tools, use the <a class="xref" href="https://predix-starter.run.aws-usw02-pr.ice.predix.io/" target="_blank">Predix Starter Kit</a> (for Basic Users) or the <a class="xref" href="https://predix-starter.run.asv-pr.ice.predix.io/" target="_blank">Predix Starter Kit</a> (for Select Users).</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the Predix Starter Kit screen, click <span class="ph uicontrol">Login as Admin</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the login screen, enter the following: </span><div class="itemgroup info">
     <ul class="ul" id="task_586a826b-f92f-44c6-9bc7-fdc6bb595fa0__ul_f7cb394f-21df-4fe6-8045-a49f887c1353"><li class="li">The predix-uaa URL from the VCAP_SERVICES environmental variable in the <span class="ph uicontrol">UAA URL:</span> field.</li>
<li class="li">The admin secret in the <span class="ph uicontrol">Admin secret:</span> field.</li>
</ul>

    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Submit</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Return to the Predix Starter Kit screen and click <span class="ph uicontrol">Create Client ID</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Verify that the <span class="ph uicontrol">UAA URL:</span> shown here is the same as the one you provided when you logged in.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the <span class="ph uicontrol">New client ID:</span> field, enter a client ID of your choosing, such as <samp class="ph codeph">traffic_test2</samp>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the <span class="ph uicontrol">New client secret:</span> field, enter a client secret of your choosing, such as <samp class="ph codeph">traffic2</samp>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the <span class="ph uicontrol">Request</span> field, note the following: </span><div class="itemgroup info">
     <ul class="ul" id="task_586a826b-f92f-44c6-9bc7-fdc6bb595fa0__ul_44f7a6b1-488d-4183-840f-ed41e4cb162d"><li class="li">The client_id and client_secret are now populated with your choices.</li>
<li class="li">For "scope", in <samp class="ph codeph">["uaa.none","openid"]</samp>, add a comma after "openid" and then add the oauth-scope, which is the oauth-scope from the VCAP_SERVICES environmental variable. For example, <samp class="ph codeph">["uaa.none","openid","ie-traffic.zones.334d60f8-2bdf-4b9b-a561-1b16a6f2df0e.user"]</samp> .</li>
<li class="li">For "authorities", in <samp class="ph codeph">["openid","uaa.none","uaa.resource"]</samp>, add a comma  after "uaa.resource" and then add the oauth-scope, which is the oauth-scope from the VCAP_SERVICES environmental variable. For example, <samp class="ph codeph">["openid","uaa.none","uaa.resource","ie-traffic.zones.334d60f8-2bdf-4b9b-a561-1b16a6f2df0e.user"]</samp>.</li>
</ul>

     <div class="note note"><span class="notetitle">Note:</span> Make sure the OAuth2 scope is added when creating the Client ID. This is obtained from the VCAP_SERVICES environmental variable of the service you created.</div>

    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Submit</span>.</span></li>
</ol>
<div class="section postreq"><div class="tasklabel"><h2 class="sectiontitle tasklabel">What to do next</h2></div>See <a class="xref" href="t_adding_intelligent_environment_services_to_your_application.html#task_0645455c-bf73-4518-8462-e097cce318bb">Adding Intelligent Environment Services to your Application</a> .</div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2016 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>