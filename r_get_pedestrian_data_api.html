
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Start with either the /assets or /locations endpoints, then use this API to retrieve the WebSocket URL to subscribe to “pedestrian in, pedestrian out” events. The websocket URL provides a link to near ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="reference"></meta><meta name="DC.Title" content="Get Pedestrian Data"></meta><meta name="DC.Creator" content="Linda Jones"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="reference_3dd4f077-428d-473f-91be-64677b081494"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Get Pedestrian Data</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="reference_3dd4f077-428d-473f-91be-64677b081494">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Get Pedestrian Data</h1>
<div class="body refbody"><div class="section">
      <p class="p">Start with either the /assets or /locations endpoints, then use this API to retrieve the WebSocket URL to subscribe to “pedestrian in, pedestrian out” events. </p>

      <p class="p">The websocket URL provides a link to near real-time data for pedestrians at the specified monitored location. You must use a WebSocket client to retrieve this data.</p>

    </div>
<div class="section">
      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_3dd4f077-428d-473f-91be-64677b081494__table_9cfacfb7-0b32-44c4-8730-549d1b8af8c1" class="table" frame="border" border="1" rules="all"><tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="24.509803921568626%"><strong class="ph b">METHOD</strong></td>
<td class="entry" valign="top" width="75.49019607843137%">GET</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="24.509803921568626%"><strong class="ph b">URI</strong></td>
<td class="entry" valign="top" width="75.49019607843137%">&lt;production url&gt;/v1/assets/{id}/live-events?event-types=SFIN, SFOUT</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="24.509803921568626%"><strong class="ph b">Sample Request URI</strong></td>
<td class="entry" valign="top" width="75.49019607843137%">&lt;production url&gt;/v1/assets/1000000027/live-events?event-types=SFIN, SFOUT</td>
</tr>
</tbody>
</table>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Query Parameters</h2>
      
      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_3dd4f077-428d-473f-91be-64677b081494__table_953eead5-e3ce-4d1f-9479-b163f9255f7c" class="table" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="17.35218508997429%" id="d19394e59">Parameter</th>
<th class="entry" valign="top" width="32.77634961439588%" id="d19394e61">Description</th>
<th class="entry" valign="top" width="12.853470437017995%" id="d19394e63">Required?</th>
<th class="entry" valign="top" width="37.01799485861182%" id="d19394e65">Filter Values</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="17.35218508997429%" headers="d19394e59 ">id</td>
<td class="entry" valign="top" width="32.77634961439588%" headers="d19394e61 ">GE identifier for the device.</td>
<td class="entry" valign="top" width="12.853470437017995%" headers="d19394e63 ">Yes</td>
<td class="entry" valign="top" width="37.01799485861182%" headers="d19394e65 ">Value such as 1000000027.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.35218508997429%" headers="d19394e59 ">live-events</td>
<td class="entry" valign="top" width="32.77634961439588%" headers="d19394e61 ">Specific to real-time data from websocket.</td>
<td class="entry" valign="top" width="12.853470437017995%" headers="d19394e63 ">Yes</td>
<td class="entry" valign="top" width="37.01799485861182%" headers="d19394e65 ">event-type</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.35218508997429%" headers="d19394e59 ">event-type</td>
<td class="entry" valign="top" width="32.77634961439588%" headers="d19394e61 ">Filter for parking events.</td>
<td class="entry" valign="top" width="12.853470437017995%" headers="d19394e63 ">Yes</td>
<td class="entry" valign="top" width="37.01799485861182%" headers="d19394e65 ">Insert the following enumeration codes to identify vehicles entering and exiting parking spaces:<dl class="dl"><dt class="dt dlterm">SFIN</dt>
<dd class="dd">If you filter by SFIN, you receive a list of pedestrians (identified by object-id) entering monitored areas within the boundaries.</dd>
<dt class="dt dlterm">SFOUT</dt>
<dd class="dd">If you filter by SFOUT, you receive a list of pedestrians (identified by object-id) exiting monitored areas within the boundaries.</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Sample Response</h2>
      
      <div class="p">This API returns a WebSocket response. You must use a WebSocket client to retrieve the live data.<pre class="pre codeblock">{
  "url": "ws://intel-env.websocket-server-dev.run.aws-usw02-pr.ice.predix.io/consume?routing_key=26fb7ac1-036a-46e1-9716-5c047c13a89b",
  "registered-events": "SFIN,SFOUT"
}
</pre>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">WebSocket Information</h2><p class="p">The Vehicle In, Vehicle Out API uses the WebSocket protocol for streaming data in the following endpoint format: <span class="keyword cmdname">ws://&lt;streaming url&gt;</span></p>
<p class="p">The WebSocket protocol is used instead of HTTP because Pedestrian Data streams near real-time data.</p>
<div class="note note"><span class="notetitle">Note:</span> The ingestion URI and &lt;Predix-Zone-Id&gt; are included with the environment variables for your application when you bind your application to Intelligent Environment services instance. To view the environment variables, on a command line, enter:</div>
<span class="keyword cmdname">cf env &lt;application name&gt;</span><p class="p">For all streaming requests, use the token received from UAA in the Authorization section of the HTTP header in the following format:</p>
<span class="keyword cmdname">Bearer &lt;token from trusted issuer&gt;</span><div class="p">The following example shows a data-ingestion request:<pre class="pre codeblock">URL: wss://ingestion_url 
Headers:
    Authorization: Bearer &lt;token from trusted issuer&gt;
    Predix-Zone-Id: &lt;Predix-Zone-Id&gt;
    Origin: http://&lt;origin-hostname&gt;/
         Request Payload: {
      "messageId": "&lt;MessageID&gt;",
    "body":
[
         {
            "name":"&lt;TagName&gt;",
          "datapoints":
[
[
                  &lt;EpochInMs&gt;,
                &lt;Measure&gt;,
                &lt;Quality&gt;
]
],
          "attributes":
{
               "&lt;AttributeKey&gt;":"&lt;AttributeValue&gt;",
             "&lt;AttributeKey2&gt;":"&lt;AttributeValue2&gt;"
          }
       }
    ]
 }
</pre>
</div>
</div>
<div class="section"><h2 class="title sectiontitle">WebSocket Response Parameters</h2>
      
      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_3dd4f077-428d-473f-91be-64677b081494__table_b17ad35e-4823-4112-8893-3e49050caaa4" class="table" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="17.575757575757574%" id="d19394e151">Parameter</th>
<th class="entry" valign="top" width="12.727272727272728%" id="d19394e153">Data Type</th>
<th class="entry" valign="top" width="12.121212121212121%" id="d19394e155">Required?</th>
<th class="entry" valign="top" width="57.57575757575758%" id="d19394e157">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">event-uid</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">String</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">A unique identifier established by a customer or external resource for the pedestrian event.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">timestamp</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">Number</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">Actual timestamp when event occurred. Timestamps are in EPOCH format.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">event-type</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">String</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">Identifies this type of event:<dl class="dl"><dt class="dt dlterm">SFIN</dt>
<dd class="dd">Pedestrian (identified by object-id) entering monitored area within the boundaries.</dd>
<dt class="dt dlterm">SFOUT</dt>
<dd class="dd">Pedestrian (identified by object-id) exiting monitored area within the boundaries.</dd>
</dl>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">device-uid</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">String</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">A unique identifier established by a customer or external resource for the device recording this event.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">location-uid</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">String</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">A unique identifier established by a customer or external resource for the monitored location for pedestrian entry and exit.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">properties</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">Map</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">Custom properties capture for this event-type instance.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 "> object-uid</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">String</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">A unique identifier established by a customer or external resource for the pedestrian that entered or departed the related location (such as crosswalk).</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 "> coordinates</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">Array</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">GPS coordinates identifying the location. Four coordinates should be provided for each location-uid.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="17.575757575757574%" headers="d19394e151 ">measures</td>
<td class="entry" valign="top" width="12.727272727272728%" headers="d19394e153 ">Array</td>
<td class="entry" valign="top" width="12.121212121212121%" headers="d19394e155 "> </td>
<td class="entry" valign="top" width="57.57575757575758%" headers="d19394e157 ">
                <dl class="dl"><dt class="dt dlterm">tag</dt>
<dd class="dd">identifier for the pedestrian</dd>
</dl>

                <dl class="dl"><dt class="dt dlterm">value</dt>
<dd class="dd">number, such as 100</dd>
</dl>

              </td>
</tr>
</tbody>
</table>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Sample Response</h2>
      
      <div class="note note"><span class="notetitle">Note:</span>  You must use a WebSocket client to retrieve this data.</div>

      <pre class="pre codeblock">{ 
        "event-uid": "f9094290-fdf1-4e47-b4db-9cb0bd0db0e5", 
        "timestamp": 1461017947527, 
        "event-type": "SFIN", 
        "device-uid": "1345-1212", 
        "location-uid": "1345-crosswalk", 
        "measures": [   
        {     
        "tag": "SFCNT",     
        "value": 8   
        } 
        ]}</pre>

    </div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2016 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>